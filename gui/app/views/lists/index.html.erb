<% provide(:title, "Remote Rogue Device Detector") %>
<% provide(:description, 'Lists') %>
<%= render 'layouts/delete_list_modal' %>
<div class='row'>
  <div class='col-md-4 col-md-offset-1'>
    <% flash.each do |message_type, message| %>
        <div class="alert alert-<%= message_type %>"><%= message %></div>
    <% end %>
    <%= link_to new_list_path, { class: "btn btn_link btn-xs" } do %>
      <span class='glyphicon glyphicon-plus'></span>
      Add new List
    <% end %>
    <table class="table table-striped">
      <thead><tr>
        <th>Glyph</th>
        <th><%= sort_link(@search, :name, "Name") %></th>
        <th>Count</th>
        <th>Action</th>
      </tr></thead>
      <%= render @lists %>
    </table>
    <%= will_paginate @lists %>
  </div>
</div>
<script>
  $('#list_delete').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget) // Button that triggered the modal
    var list = button.data('listname')
    var list_id = button.data('id')
    var modal = $(this)
    modal.find('.modal-title').text("Delete  List '" + list + "'?")
    var $submit = $(this).find('.btn-danger'), href = $submit.attr('href');
    $submit.attr('href', href.replace('listid', list_id));
  });
</script>